pipeline {
	agent any
	stages {
		stage("Build") {
			steps {
				echo " Start build the app "
				bat "mvn clean package"
			}
			post{
				success{
					echo " build success , now archiving the artifact "
					archiveArtifacts artifacts : "**/webApp.war"
				}
			}
		}
		stage("Deploy in staging env"){
			steps {
				build job : "deploy app in staging env"
			}
		}
		stage("Deploy in production env"){
			steps {
				timeout(time : 5, unit : "DAY"){
					input message : " This jobs needs to be approuved before execution ! "
				}
				build job : "deploy app in prod env"
			}
		}
	}
}
